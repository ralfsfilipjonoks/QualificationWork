<!DOCTYPE html>
<html>
  <head>
    <title>Add a Point</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.js"></script>
    <script>
    function initMap() {
      var map = L.map('map').setView([37.7749, -122.4194], 8);
      
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: 'Map data Â© <a href="https://openstreetmap.org">OpenStreetMap</a> contributors'
      }).addTo(map);
      
      map.on('click', function(e) {
        var lat = e.latlng.lat;
        var lng = e.latlng.lng;
        document.getElementById("latitude").value = lat;
        document.getElementById("longitude").value = lng;
        alert("Latitude: " + lat + "  Longitude: " + lng);
      });
      }
    </script>
  </head>
  <body onload="initMap()">
    {% if notification %}
        <p>{{ notification }}</p>
    {% endif %}
    <h1>Add a Point</h1>
    <form method="post" action="{{ url_for('add_point') }}">
      <label for="name">Name:</label>
      <input type="text" id="name" name="name" required><br>

      <label for="latitude">Latitude:</label>
      <input type="number" id="latitude" name="latitude" step="0.00000000000000001" min="-90" max="90" required><br>

      <label for="longitude">Longitude:</label>
      <input type="number" id="longitude" name="longitude" step="0.00000000000000001" min="-180" max="180" required><br>

      <label for="description">Description:</label>
      <input type="text" id="description" name="description" required><br>

      <label for="postdate">Post Date:</label>
      <input type="date" id="postdate" name="postdate" required><br>

      <label for="removedate">Remove Date:</label>
      <input type="date" id="removedate" name="removedate"><br>

      <label for="type">Type:</label>
      <select id="type" name="type">
      {% if types %}
      {% for x in types %}
        <option value="{{ x['type'] }}">{{ x['type'] }}</option>
      {% endfor %}
      {% endif %}
      </select><br>

      <input type="hidden" id="username" name="username" value="{{ username }}">

      <input type="submit" value="Add Point">
      <div id="map" style="height: 500px;"></div>
    </form>
  </body>
</html>